<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADS FUND - Your Investment Partner</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            /* Subtle radial gradient background for the entire page */
            background-image: radial-gradient(circle at top left, #f0f8ff, #ffffff); /* Very light blue (aliceblue) to white */
            background-attachment: fixed;
        }

        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* AI Loading Spinner */
        .ai-loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #3b82f6; /* Blue-500 */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Countdown Timer */
        .countdown-timer {
            font-size: 2.5rem;
            font-weight: bold;
            color: #fcd34d; /* yellow-300 */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Modal specific styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 1.5rem; /* rounded-3xl */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            width: 500px;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
            overflow: hidden; /* Hide overflowing gradient animation */
        }
        /* Increased width for investor form modal */
        #investorFormModal .modal-content {
            max-width: 90%;
            width: 700px; /* Wider for the form */
            padding: 3rem; /* More padding */
            /* Animated background gradient for the form modal */
            background: linear-gradient(135deg, #e0f2fe, #e3f2fd, #bbdefb, #90caf9); /* Light blue shades */
            background-size: 400% 400%;
            animation: dynamic-gradient-light 15s ease-in-out infinite alternate;
        }

        /* Keyframes for the light dynamic gradient */
        @keyframes dynamic-gradient-light {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #4a5568; /* gray-700 */
            transition: color 0.2s;
        }
        .modal-close-btn:hover {
            color: #ef4444; /* red-500 */
        }

        /* Hero background image */
        .hero-background-image {
            background-image: url('https://wallpapercave.com/wp/wp13492660.png');
            background-size: cover; /* Cover the entire area */
            background-position: center; /* Center the image */
            background-repeat: no-repeat;
            position: absolute;
            inset: 0;
            z-index: 1; /* Below content, above glow */
        }

        /* Section reveal animation */
        .section-hidden {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }
        .section-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Gradient Text for headings */
        .gradient-text-blue {
            background: linear-gradient(to right, #1d4ed8, #3b82f6); /* blue-700 to blue-500 */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent; /* Fallback for browsers not supporting -webkit-text-fill-color */
        }

        /* Pulsating effect for main CTA button */
        @keyframes pulse-once {
            0% { transform: scale(1); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
            50% { transform: scale(1.03); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.2), 0 10px 10px -5px rgba(0,0,0,0.04); }
            100% { transform: scale(1); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        }
        .cta-pulse {
            animation: pulse-once 2s ease-out; /* Run once on load, then can be repeated */
        }

        /* Enhanced card hover effects */
        .card-hover-effect:hover {
            transform: translateY(-8px) scale(1.02); /* Lift and slight scale */
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.2), 0 10px 10px -5px rgba(0,0,0,0.04); /* Deeper shadow */
            border-color: #6d28d9; /* Example: A slightly darker shade for purple */
        }

        /* Button hover/focus effects */
        .button-effect {
            transition: all 0.3s ease-in-out;
        }
        .button-effect:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        .button-effect:active {
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Floating animation for icons/emojis */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Hero section overlay glow (adjusted to work with dynamic background) */
        @keyframes hero-glow {
            0% { background-color: rgba(255, 255, 255, 0); }
            50% { background-color: rgba(255, 255, 255, 0.05); }
            100% { background-color: rgba(255, 255, 255, 0); }
        }
        .hero-overlay-glow {
            position: absolute;
            inset: 0;
            background-color: rgba(255, 255, 255, 0);
            animation: hero-glow 15s ease-in-out infinite alternate;
            z-index: 2; /* Ensure it's above the dynamic background */
        }

        /* Money Animation Container */
        .money-animation-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 5; /* Below text, above background */
            pointer-events: none; /* Allows clicks to pass through to elements below */
        }

        .money-particle {
            position: absolute;
            background-image: url('uploaded:money.jpg-aef342fc-1e0a-4b43-a686-04e9e5ae4bfe'); /* Use the uploaded money image */
            background-size: cover; /* Cover the particle area */
            background-position: center; /* Center the image within the particle */
            background-repeat: no-repeat;
            opacity: 0;
            transform: translateZ(0); /* Hardware acceleration */
            border-radius: 3px; /* Slightly rounded corners for notes */
            box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* Add subtle shadow for depth */
            animation: floatAndFadeMoney linear infinite; /* Apply the animation */
            /* Responsive sizing for money particles */
            width: clamp(30px, 6vw, 80px); /* Min 30px, max 80px, fluid with viewport width */
            height: clamp(15px, 3vw, 40px); /* Min 15px, max 40px, fluid with viewport width */
        }

        /* Keyframes for the money animation */
        @keyframes floatAndFadeMoney {
            0% {
                transform: translateY(100vh) translateX(var(--initial-x, 0px)) rotate(var(--initial-rotation, 0deg)) scale(var(--initial-scale, 0.8));
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            80% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-20vh) translateX(var(--final-x, 0px)) rotate(var(--final-rotation, 360deg)) scale(var(--final-scale, 1.2));
                opacity: 0;
            }
        }

        /* Variables for money particles (assigned via JS for more variety) */
        /* These will be overridden by JS for a more random distribution */
        .money-particle:nth-child(1) { left: 10%; animation-delay: 0s; --initial-rotation: 15deg; --final-rotation: 375deg; --initial-x: 0px; --final-x: 20px; }
        .money-particle:nth-child(2) { left: 25%; animation-delay: 2s; --initial-rotation: -10deg; --final-rotation: 350deg; --initial-x: 0px; --final-x: -30px; }
        .money-particle:nth-child(3) { left: 40%; animation-delay: 4s; --initial-rotation: 5deg; --final-rotation: 365deg; --initial-x: 0px; --final-x: 10px; }
        .money-particle:nth-child(4) { left: 55%; animation-delay: 1s; --initial-rotation: 20deg; --final-rotation: 380deg; --initial-x: 0px; --final-x: -15px; }
        .money-particle:nth-child(5) { left: 70%; animation-delay: 3s; --initial-rotation: -25deg; --final-rotation: 335deg; --initial-x: 0px; --final-x: 25px; }
        .money-particle:nth-child(6) { left: 85%; animation-delay: 5s; --initial-rotation: 10deg; --final-rotation: 370deg; --initial-x: 0px; --final-x: -5px; }
        .money-particle:nth-child(7) { left: 15%; animation-delay: 0.5s; --initial-rotation: -18deg; --final-rotation: 342deg; --initial-x: 0px; --final-x: 18px; }
        .money-particle:nth-child(8) { left: 35%; animation-delay: 2.5s; --initial-rotation: 22deg; --final-rotation: 382deg; --initial-x: 0px; --final-x: -22px; }
        .money-particle:nth-child(9) { left: 65%; animation-delay: 4.5s; --initial-rotation: -7deg; --final-rotation: 353deg; --initial-x: 0px; --final-x: 12px; }
        .money-particle:nth-child(10) { left: 5%; animation-delay: 6s; --initial-rotation: 30deg; --final-rotation: 390deg; --initial-x: 0px; --final-x: -28px; }

        /* Text stroke for Hero Section */
        .hero-text-stroke {
            text-shadow: 2px 2px 8px rgba(0,0,0,0.9), 0 0 10px rgba(0,0,0,0.5); /* Stronger black stroke/shadow */
        }

        /* New form styling */
        .form-group {
            margin-bottom: 1.5rem; /* Increased spacing between form groups */
        }

        .form-input-field, .form-textarea-field {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem; /* More padding */
            font-size: 1rem;
            line-height: 1.5;
            color: #4a5568; /* gray-700 */
            background-color: #f8fafc; /* light blue-gray */
            background-clip: padding-box;
            border: 1px solid #e2e8f0; /* gray-200 */
            border-radius: 0.75rem; /* rounded-lg */
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05); /* subtle inset shadow */
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .form-input-field:focus, .form-textarea-field:focus {
            color: #1a202c; /* dark gray */
            background-color: #fff;
            border-color: #3b82f6; /* blue-500 */
            outline: 0;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25); /* blue-500 with alpha */
        }

        .form-label {
            display: block;
            font-size: 0.875rem; /* sm */
            font-weight: 600; /* semibold */
            color: #2d3748; /* gray-800 */
            margin-bottom: 0.5rem;
        }

        .form-submit-btn {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            font-weight: bold;
            padding: 0.875rem 2rem; /* py-3 px-6 */
            border-radius: 9999px; /* rounded-full */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .form-submit-btn:hover {
            background-color: #2563eb; /* blue-600 */
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .form-submit-btn:active {
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Fade animation for form messages */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }

        .form-message-success, .form-message-error {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            text-align: center;
            font-weight: 500;
            animation: fadeIn 0.5s ease-out forwards; /* Fade in when displayed */
        }

        .form-message-success {
            background-color: #d1fae5; /* green-100 */
            color: #065f46; /* green-800 */
        }

        .form-message-error {
            background-color: #fee2e2; /* red-100 */
            color: #991b1b; /* red-800 */
        }

        .form-message.fade-out {
            animation: fadeOut 0.5s ease-in forwards; /* Fade out when hidden */
        }

        /* Plan Card Specific Styles */
        .plan-card {
            position: relative;
            overflow: hidden;
            background-image: linear-gradient(to bottom right, #fdfdfd, #f0f0f0); /* Subtle light gradient */
            padding: 2rem; /* Adjusted from p-8 (2.5rem) to 2rem */
        }

        .plan-card.standard-plan {
            border-top: 8px solid #3b82f6; /* blue-500 */
            background-image: linear-gradient(to bottom right, #e0f7fa, #bbdefb); /* Light blue to a slightly darker blue */
        }

        .plan-card.premium-plan {
            border-top: 8px solid #8b5cf6; /* purple-500 */
            background-image: linear-gradient(to bottom right, #ede7f6, #d1c4e9); /* Light purple to a slightly darker purple */
        }

        .plan-card.elite-plan {
            border-top: 8px solid #f59e0b; /* yellow-500 */
            background-image: linear-gradient(to bottom right, #fffde7, #fff59d); /* Light yellow to a slightly darker yellow */
        }

        /* Enhanced hover effects for plan cards */
        .plan-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3); /* Deeper shadow on hover */
            border-color: var(--hover-border-color); /* Dynamic border color */
        }
        .plan-card.standard-plan:hover { --hover-border-color: #1d4ed8; } /* darker blue */
        .plan-card.premium-plan:hover { --hover-border-color: #6d28d9; } /* darker purple */
        .plan-card.elite-plan:hover { --hover-border-color: #d97706; } /* darker yellow */

        /* Plan card icon styling */
        .plan-icon-wrapper {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            padding: 0.8rem; /* Slightly reduced padding */
            display: inline-flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 1rem; /* Reduced from 1.5rem to 1rem */
        }
        .plan-icon {
            font-size: 2.5rem; /* Slightly smaller icon size */
            line-height: 1;
        }

        /* New tag for plans */
        .plan-tag {
            position: absolute;
            top: 0.75rem; /* Adjusted from 1rem */
            right: 0.75rem; /* Adjusted from 1rem */
            background-color: #ef4444; /* red-500 */
            color: white;
            padding: 0.2rem 0.6rem; /* Slightly smaller padding */
            border-radius: 0.4rem; /* Slightly smaller border-radius */
            font-weight: bold;
            font-size: 0.8rem; /* Slightly smaller font size */
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            animation: pulse-tag 1.5s infinite ease-in-out alternate;
        }

        @keyframes pulse-tag {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Text adjustments for compactness */
        .plan-card h3 {
            margin-bottom: 0.75rem; /* Adjusted from 1rem */
        }
        .plan-card .text-lg.mb-4 {
            margin-bottom: 0.75rem; /* Adjusted from 1rem */
        }
        .plan-card .block.text-2xl.font-semibold.mb-2 {
            margin-bottom: 0.25rem; /* Adjusted from 0.5rem */
        }
        .plan-card .border-t.pt-4 {
            padding-top: 0.75rem; /* Adjusted from 1rem */
        }
        .plan-card h4.text-xl.mb-2 {
            margin-bottom: 0.5rem; /* Adjusted from 0.75rem */
        }

        /* New: Animation for plan cards when "Explore Our Plans" is clicked */
        @keyframes card-initial-pop {
            0% { transform: translateY(0) scale(1); opacity: 0.8; }
            25% { transform: translateY(-5px) scale(1.01); opacity: 1; }
            50% { transform: translateY(0) scale(1); opacity: 1; }
            75% { transform: translateY(-2px) scale(1.005); opacity: 1; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }
        .animate-card-pop {
            animation: card-initial-pop 0.8s ease-out forwards; /* Run once, then stay */
        }

    </style>
</head>
<body>

    <!-- Header Section -->
    <header class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white shadow-lg py-4 fixed w-full z-10">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <!-- Original SVG Logo - using a custom icon for "ADS FUND" -->
                <svg class="w-10 h-10 text-yellow-300" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <!-- A stylized 'A' for ADS with an upward arrow to represent growth -->
                    <path d="M12 2L2 22H5.5L12 8.3L18.5 22H22L12 2ZM12 5.6L14.7 11.2H9.3L12 5.6Z" fill="#ffeb3b"/>
                    <!-- A simple 'D' like shape for diversification/development -->
                    <path d="M19 12C19 15.866 15.866 19 12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5H19V12ZM12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17C14.7614 17 17 14.7614 17 12H12V7Z" fill="#81c784"/>
                    <!-- A simple 'S' for security/stability -->
                    <path d="M17 6C14.7909 6 13 7.79086 13 10C13 12.2091 14.7909 14 17 14C19.2091 14 21 12.2091 21 10H17V6Z" fill="#ffa726"/>
                    <path d="M7 18C9.20914 18 11 16.2091 11 14C11 11.7909 9.20914 10 7 10C4.79086 10 3 11.7909 3 14H7V18Z" fill="#42a5f5"/>
                </svg>

                <a href="#" class="text-3xl font-bold tracking-tight">ADS FUND</a>
            </div>
            <nav class="hidden md:block">
                <ul class="flex space-x-8 text-lg font-medium">
                    <li><a href="#plans" class="hover:text-blue-200 transition duration-300">Investment Plans</a></li>
                    <li><a href="#how-it-works" class="hover:text-blue-200 transition duration-300">How It Works</a></li>
                    <li><a href="#why-choose-us" class="hover:text-blue-200 transition duration-300">Why Choose Us</a></li>
                    <li><a href="#limited-time-offer" class="hover:text-blue-200 transition duration-300">Special Offer</a></li>
                    <li><a href="#ai-calculator" class="hover:text-blue-200 transition duration-300">AI Calculator</a></li>
                    <!-- Removed "My Investments" link -->
                </ul>
            </nav>
            <div class="md:hidden">
                <button id="mobileMenuButton" class="text-white focus:outline-none">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu Overlay -->
        <div id="mobileMenu" class="hidden md:hidden fixed inset-0 bg-blue-800 bg-opacity-95 z-50 flex flex-col items-center justify-center space-y-8 text-2xl font-bold transition-opacity duration-300 ease-in-out opacity-0">
            <button id="closeMobileMenuButton" class="absolute top-6 right-6 text-white text-4xl focus:outline-none">&times;</button>
            <ul class="flex flex-col items-center space-y-6">
                <li><a href="#plans" class="hover:text-yellow-300 transition duration-300" data-close-menu>Investment Plans</a></li>
                <li><a href="#how-it-works" class="hover:text-yellow-300 transition duration-300" data-close-menu>How It Works</a></li>
                <li><a href="#why-choose-us" class="hover:text-yellow-300 transition duration-300" data-close-menu>Why Choose Us</a></li>
                <li><a href="#limited-time-offer" class="hover:text-yellow-300 transition duration-300" data-close-menu>Special Offer</a></li>
                <li><a href="#ai-calculator" class="hover:text-yellow-300 transition duration-300" data-close-menu>AI Calculator</a></li>
                <!-- Removed "My Investments" link -->
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative text-white flex items-center justify-center min-h-screen pt-20">
        <!-- New: Background image -->
        <div class="hero-background-image"></div>
        <!-- Money Animation Container -->
        <div class="money-animation-container">
            <div class="money-particle" style="--initial-rotation: 15deg; --final-rotation: 375deg; --initial-x: 0px; --final-x: 20px; animation-duration: 7s;"></div>
            <div class="money-particle" style="--initial-rotation: -10deg; --final-rotation: 350deg; --initial-x: 0px; --final-x: -30px; animation-duration: 8s; animation-delay: 2s;"></div>
            <div class="money-particle" style="--initial-rotation: 5deg; --final-rotation: 365deg; --initial-x: 0px; --final-x: 10px; animation-duration: 6s; animation-delay: 4s;"></div>
            <div class="money-particle" style="--initial-rotation: 20deg; --final-rotation: 380deg; --initial-x: 0px; --final-x: -15px; animation-duration: 9s; animation-delay: 1s;"></div>
            <div class="money-particle" style="--initial-rotation: -25deg; --final-rotation: 335deg; --initial-x: 0px; --final-x: 25px; animation-duration: 7.5s; animation-delay: 3s;"></div>
            <div class="money-particle" style="--initial-rotation: 10deg; --final-rotation: 370deg; --initial-x: 0px; --final-x: -5px; animation-duration: 6.5s; animation-delay: 5s;"></div>
            <div class="money-particle" style="--initial-rotation: -18deg; --final-rotation: 342deg; --initial-x: 0px; --final-x: 18px; animation-duration: 8.5s; animation-delay: 0.5s;"></div>
            <div class="money-particle" style="--initial-rotation: 22deg; --final-rotation: 382deg; --initial-x: 0px; --final-x: -22px; animation-duration: 7s; animation-delay: 2.5s;"></div>
            <div class="money-particle" style="--initial-rotation: -7deg; --final-rotation: 353deg; --initial-x: 0px; --final-x: 12px; animation-duration: 9.5s; animation-delay: 4.5s;"></div>
            <div class="money-particle" style="--initial-rotation: 30deg; --final-rotation: 390deg; --initial-x: 0px; --final-x: -28px; animation-duration: 8s; animation-delay: 6s;"></div>
        </div>

        <div class="container mx-auto px-6 py-20 text-center relative z-10">
            <h1 class="text-5xl md:text-6xl font-extrabold leading-tight mb-6 hero-text-stroke">
                Welcome to <span class="text-yellow-300">ADS FUND</span>
            </h1>
            <p class="text-3xl md:text-4xl font-semibold mb-4 text-white hero-text-stroke">Aspire. Develop. Secure.</p> <!-- Added tagline -->
            <p class="text-xl md:text-2xl mb-10 max-w-3xl mx-auto hero-text-stroke">
                Where your investments fuel growth and secure a prosperous financial future.
                We're dedicated to delivering consistent returns, fostering trust, and building long-term success together.
            </p>
            <a href="#plans" id="explorePlansBtn" class="bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 px-8 rounded-full shadow-lg transform transition duration-300 hover:scale-105 inline-block cta-pulse button-effect">
                Explore Our Plans
            </a>
        </div>
    </section>

    <!-- Investment Plans Section -->
    <section id="plans" class="py-20 bg-gray-100 section-hidden">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-extrabold text-center mb-12 gradient-text-blue">Our Investment Plans</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">

                <!-- Standard Plan Card -->
                <div class="plan-card standard-plan bg-white rounded-3xl shadow-xl transform transition duration-300 hover:scale-105 flex flex-col cursor-pointer card-hover-effect"
                    data-plan-name="Standard Plan"
                    data-monthly-return="7.5%"
                    data-min-investment="500"
                    data-payout-frequency="Monthly"
                    data-lock-in="2 months minimum"
                    data-benefits='["Stable 7.5% return on investment every month.", "Flexible withdrawal option after the lock-in period."]'
                    data-total-return="15% over 2 months">
                    <span class="plan-tag">NEW</span>
                    <div class="plan-icon-wrapper mx-auto mb-4">
                        <span class="plan-icon text-blue-600">üõ°Ô∏è</span>
                    </div>
                    <h3 class="text-3xl font-bold text-blue-700 mb-3 text-center">Standard Plan</h3>
                    <p class="text-lg mb-3 text-center">
                        <span class="block text-2xl font-semibold text-green-600 mb-1">7.5% Monthly Return</span>
                        Minimum Investment: <span class="font-bold">‚Çπ500</span><br>
                        Payout Frequency: Monthly<br>
                        Lock-in Period: 2 months minimum
                    </p>
                    <div class="border-t border-gray-200 pt-3 mt-auto">
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">Benefits:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>Stable 7.5% return on investment every month.</li>
                            <li>Flexible withdrawal option after the lock-in period.</li>
                        </ul>
                    </div>
                </div>

                <!-- Premium 6-Month Plan Card -->
                <div class="plan-card premium-plan bg-white rounded-3xl shadow-xl transform transition duration-300 hover:scale-105 flex flex-col cursor-pointer card-hover-effect"
                    data-plan-name="Premium 6-Month Plan"
                    data-monthly-return="7.5%"
                    data-min-investment="500"
                    data-payout-frequency="Monthly"
                    data-lock-in="6 months"
                    data-benefits='["Bonus: Receive an additional 5% return at the end of the 6-month period.", "Total Return: 50% over 6 months (45% from monthly returns + 5% bonus).", "Perk: Priority Support.", "Referral Bonus: Refer another investor and earn an extra 1% on your referrals investment."]'
                    data-total-return="50% over 6 months">
                     <div class="plan-icon-wrapper mx-auto mb-4">
                        <span class="plan-icon text-purple-600">‚≠ê</span>
                    </div>
                    <h3 class="text-3xl font-bold text-purple-700 mb-3 text-center">Premium 6-Month Plan</h3>
                    <p class="text-lg mb-3 text-center">
                        <span class="block text-2xl font-semibold text-green-600 mb-1">7.5% Monthly Return</span>
                        Minimum Investment: <span class="font-bold">‚Çπ500</span><br>
                        Payout Frequency: Monthly<br>
                        Lock-in Period: 6 months
                    </p>
                    <div class="border-t border-gray-200 pt-3 mt-auto">
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">SPECIAL OFFER:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>Bonus: Receive an additional <span class="font-bold">5% return</span> at the end of the 6-month period.</li>
                            <li>Total Return: <span class="font-bold">50% over 6 months</span> (45% from monthly returns + 5% bonus).</li>
                        </ul>
                        <h4 class="text-xl font-semibold text-gray-700 mb-2 mt-4">Exclusive Perks:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>Priority Support.</li>
                            <li>Referral Bonus: Refer another investor and earn an extra <span class="font-bold">1%</span> on your referrals investment.</li>
                        </ul>
                    </div>
                </div>

                <!-- Elite 12-Month Plan Card -->
                <div class="plan-card elite-plan bg-white rounded-3xl shadow-xl transform transition duration-300 hover:scale-105 flex flex-col cursor-pointer card-hover-effect"
                    data-plan-name="Elite 12-Month Plan"
                    data-monthly-return="7.5%"
                    data-min-investment="1000"
                    data-payout-frequency="Monthly"
                    data-lock-in="12 months"
                    data-benefits='["Bonus: Receive an additional 10% return at the end of the 12-month period.", "Total Return: 100% over 12 months (90% from monthly returns + 10% bonus).", "Referral Bonus: Refer another investor and earn an extra 2% on your referrals investment.", "Annual Investment Report: Get a comprehensive analysis of your returns and market trends."]'
                    data-total-return="100% over 12 months">
                    <div class="plan-icon-wrapper mx-auto mb-4">
                        <span class="plan-icon text-yellow-600">üëë</span>
                    </div>
                    <h3 class="text-3xl font-bold text-yellow-700 mb-3 text-center">Elite 12-Month Plan</h3>
                    <p class="text-lg mb-3 text-center">
                        <span class="block text-2xl font-semibold text-green-600 mb-1">7.5% Monthly Return</span>
                        Minimum Investment: <span class="font-bold">‚Çπ1000</span><br>
                        Payout Frequency: Monthly<br>
                        Lock-in Period: 12 months
                    </p>
                    <div class="border-t border-gray-200 pt-3 mt-auto">
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">SPECIAL OFFER:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>Bonus: Receive an additional <span class="font-bold">10% return</span> at the end of the 12-month period.</li>
                            <li>Total Return: <span class="font-bold">100% over 12 months</span> (90% from monthly returns + 10% bonus).</li>
                        </ul>
                        <h4 class="text-xl font-semibold text-gray-700 mb-2 mt-4">Exclusive Perks:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>Referral Bonus: Refer another investor and earn an extra <span class="font-bold">2%</span> on your referrals investment.</li>
                            <li>Annual Investment Report: Get a comprehensive analysis of your returns and market trends.</li>
                        </ul>
                    </div>
                </div>

            </div>
            <!-- Current Investor Count Display -->
            <div class="text-center mt-12 text-2xl font-bold text-blue-800">
                Current Investors: <span id="investorCountDisplay">0</span> / <span id="investorLimitDisplay">100</span>
                <p id="limitReachedMessage" class="text-red-600 text-lg mt-2 hidden">Maximum investor limit reached! Please check back later.</p>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="py-20 bg-blue-700 text-white section-hidden">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-4xl font-extrabold mb-12">How It Works</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <div class="bg-blue-600 rounded-2xl p-8 shadow-lg transform transition duration-300 hover:scale-105 hover:bg-blue-500">
                    <div class="text-5xl mb-4 float-animation">üí∞</div>
                    <h3 class="text-2xl font-bold mb-3">Consistent Monthly Payments</h3>
                    <p class="text-lg">Investors receive a <span class="font-bold">7.5% return</span> on their principal investment every month, <span class="font-bold text-yellow-200">disbursed at the end of each calendar month,</span> reliably and on time.</p>
                </div>
                <div class="bg-blue-600 rounded-2xl p-8 shadow-lg transform transition duration-300 hover:scale-105 hover:bg-blue-500">
                    <div class="text-5xl mb-4 float-animation">üéÅ</div>
                    <h3 class="text-2xl font-bold mb-3">Bonus Offers</h3>
                    <p class="text-lg">Investors opting for <span class="font-bold">6-month or 12-month plans</span> are rewarded with an additional percentage at the end of their term as a loyalty bonus.</p>
                </div>
                <div class="bg-blue-600 rounded-2xl p-8 shadow-lg transform transition duration-300 hover:scale-105 hover:bg-blue-500">
                    <div class="text-5xl mb-4 float-animation">üí∏</div>
                    <h3 class="text-2xl font-bold mb-3">Flexible Withdrawals</h3>
                    <p class="text-lg">After the lock-in period, investors may choose to <span class="font-bold">withdraw their principal investment and any accumulated bonuses,</span> reinvest, or continue receiving monthly returns. <span class="font-bold text-yellow-200">For early withdrawals (before lock-in ends), the principal amount will be returned after 15 days, with a deduction equivalent to 2 months' returns.</span></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section id="why-choose-us" class="py-20 bg-gray-50 section-hidden">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-extrabold text-center mb-12 gradient-text-blue">Why Choose ADS FUND?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <div class="bg-white rounded-2xl p-8 shadow-xl transform transition duration-300 hover:scale-105 border-b-4 border-green-500 text-center">
                    <div class="text-5xl text-green-600 mb-4 float-animation">üìà</div>
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">High Returns</h3>
                    <p class="text-lg text-gray-700">We offer industry-leading returns with guaranteed monthly payouts, maximizing your investment growth.</p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-xl transform transition duration-300 hover:scale-105 border-b-4 border-orange-500 text-center">
                    <div class="text-5xl text-orange-600 mb-4 float-animation">‚≠ê</div>
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">Special Offers</h3>
                    <p class="text-lg text-gray-700">Maximize your profits with our exclusive 6-month and 12-month bonuses, rewarding your loyalty.</p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-xl transform transition duration-300 hover:scale-105 border-b-4 border-teal-500 text-center">
                    <div class="text-5xl text-teal-600 mb-4 float-animation">üîí</div>
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">Security & Trust</h3>
                    <p class="text-lg text-gray-700">Your investment is protected with transparent terms and a dedicated support team, ensuring peace of mind.</p>
                </div>
            </div>
            <p class="text-center text-xl text-gray-700 mt-12 max-w-3xl mx-auto">
                This structure encourages longer-term investments by offering additional bonuses, while also giving flexibility to those interested in shorter-term gains.
            </p>
        </div>
    </section>

    <!-- Limited Time Offer Section -->
    <section id="limited-time-offer" class="py-20 bg-gradient-to-r from-red-600 to-red-800 text-white text-center animate-pulse-light section-hidden">
        <div class="container mx-auto px-6">
            <h2 class="text-5xl font-extrabold mb-6">üî• Limited Time Offer! üî•</h2>
            <p class="text-2xl mb-8 max-w-2xl mx-auto">
                Invest in our Premium 6-Month Plan this month and receive an **additional 2% bonus** at the end of your term!
                That's a total of <span class="font-bold text-yellow-300">7% bonus</span> for just 6 months!
            </p>
            <div class="countdown-timer mb-8" id="countdown"></div>
            <a href="#plans" class="bg-yellow-400 hover:bg-yellow-500 text-red-900 font-bold py-3 px-10 rounded-full shadow-lg transform transition duration-300 hover:scale-105 inline-block text-xl">
                Seize This Opportunity!
            </a>
        </div>
    </section>

    <!-- Investment Calculator & AI Insight Section -->
    <section id="ai-calculator" class="py-20 bg-gradient-to-br from-blue-700 to-indigo-800 text-white section-hidden">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-4xl font-extrabold mb-12">Calculate Your Returns & Get ‚ú®AI Insight‚ú®</h2>
            <div class="bg-blue-600 rounded-2xl p-8 shadow-xl max-w-xl mx-auto">
                <div class="mb-6 text-left">
                    <label for="investmentAmount" class="block text-xl font-medium mb-2">Investment Amount (‚Çπ):</label>
                    <input type="number" id="investmentAmount" value="1000" min="0" step="100" class="w-full p-3 rounded-lg bg-blue-700 border border-blue-500 text-white placeholder-blue-300 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition duration-200" placeholder="e.g., 500, 1000">
                </div>
                <div class="mb-8 text-left">
                    <label for="investmentPlan" class="block text-xl font-medium mb-2">Select Investment Plan:</label>
                    <select id="investmentPlan" class="w-full p-3 rounded-lg bg-blue-700 border border-blue-500 text-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition duration-200">
                        <option value="standard">Standard Plan (2+ months)</option>
                        <option value="premium">Premium 6-Month Plan</option>
                        <option value="elite">Elite 12-Month Plan</option>
                    </select>
                </div>
                <button id="calculateBtn" class="bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 px-8 rounded-full shadow-lg transform transition duration-300 hover:scale-105 inline-flex items-center justify-center">
                    Calculate & Get AI Insight
                    <span id="loadingSpinner" class="ai-loading-spinner ml-3 hidden"></span>
                </button>

                <div id="results" class="mt-10 text-left bg-blue-700 p-6 rounded-lg hidden">
                    <h3 class="text-2xl font-bold mb-4 text-yellow-300">Projected Returns:</h3>
                    <p class="text-xl mb-4">Initial Investment: <span id="displayInitialInvestment" class="font-semibold">‚Çπ0</span></p>
                    <p class="text-xl mb-4">Projected Total Return: <span id="displayTotalReturn" class="font-semibold">‚Çπ0</span></p>
                    <p class="text-xl mb-4">Total Percentage Return: <span id="displayPercentageReturn" class="font-semibold">0%</span></p>

                    <h3 class="text-2xl font-bold mt-6 mb-4 text-yellow-300">AI Insight:</h3>
                    <div id="aiInsight" class="text-lg leading-relaxed bg-blue-800 p-4 rounded-lg shadow-inner">
                        Your personalized investment insight will appear here.
                    </div>
                </div>
                <div id="errorMessage" class="mt-6 text-red-300 text-lg hidden">
                    An error occurred. Please try again later.
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center text-gray-400">
            <p>&copy; 2024 ADS FUND. All rights reserved.</p>
            <p class="mt-2">For inquiries, please contact us at <a href="mailto:info@adsfund.com" class="text-blue-400 hover:underline">info@adsfund.com</a></p>
        </div>
    </footer  >

    <!-- Investment Plan Detail Modal -->
    <div id="planDetailModal" class="modal-overlay">
        <div class="modal-content text-gray-800">
            <button class="modal-close-btn" id="closeModalBtn">&times;</button>
            <h3 id="modalPlanName" class="text-3xl font-bold text-blue-700 mb-4"></h3>
            <p class="text-lg mb-2"><strong>Monthly Return:</strong> <span id="modalMonthlyReturn"></span></p>
            <p class="text-lg mb-2"><strong>Minimum Investment:</strong> ‚Çπ<span id="modalMinInvestment"></span></p>
            <p class="text-lg mb-2"><strong>Payout Frequency:</strong> <span id="modalPayoutFrequency"></span></p>
            <p class="text-lg mb-4"><strong>Lock-in Period:</strong> <span id="modalLockIn"></span></p>
            <p class="text-lg mb-4"><strong>Total Projected Return:</strong> <span id="modalTotalReturn"></span></p>
            <h4 class="text-xl font-semibold text-gray-700 mb-2">Key Highlights:</h4>
            <ul id="modalBenefits" class="list-disc list-inside text-gray-600 space-y-1 mb-6">
                <!-- Benefits will be populated here -->
            </ul>

            <button id="investNowBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-md transform transition duration-300 hover:scale-105">
                Invest Now!
            </button>
             <p id="investLimitMessage" class="text-red-500 text-center mt-4 hidden">The maximum investor limit has been reached!</p>
        </div>
    </div>

    <!-- Investor Form Modal -->
    <div id="investorFormModal" class="modal-overlay">
        <div class="modal-content text-gray-800">
            <button class="modal-close-btn" id="closeInvestorFormModalBtn">&times;</button>
            <h3 class="text-3xl font-bold text-blue-700 mb-6 text-center">Investor Registration</h3>
            <p class="text-lg text-gray-700 mb-6 text-center">
                You are applying for the <span id="formSelectedPlan" class="font-bold text-purple-700"></span>.
                Please provide your details below.
            </p>

            <form id="investorForm" class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                <div class="form-group col-span-full">
                    <label for="fullName" class="form-label">Full Name</label>
                    <input type="text" id="fullName" name="fullName" class="form-input-field" required>
                </div>
                <div class="form-group">
                    <label for="email" class="form-label">Email Address</label>
                    <input type="email" id="email" name="email" class="form-input-field" required>
                </div>
                <div class="form-group">
                    <label for="mobileNo" class="form-label">Mobile Number</label>
                    <input type="tel" id="mobileNo" name="mobileNo" class="form-input-field" required>
                </div>
                <div class="form-group">
                    <label for="formInvestmentAmountInput" class="form-label">Investment Amount (‚Çπ)</label>
                    <input type="number" id="formInvestmentAmountInput" name="investmentAmount" class="form-input-field" min="0" required>
                    <p class="text-sm text-gray-600 mt-1">Minimum for this plan: ‚Çπ<span id="formMinInvestmentDisplay"></span></p>
                </div>
                <div class="form-group col-span-full">
                    <label for="address" class="form-label">Full Address</label>
                    <textarea id="address" name="address" rows="3" class="form-textarea-field" required></textarea>
                </div>
                <div class="form-group">
                    <label for="bankAccount" class="form-label">Bank Account Number</label>
                    <input type="text" id="bankAccount" name="bankAccount" class="form-input-field" required>
                </div>
                <div class="form-group">
                    <label for="bankName" class="form-label">Bank Name</label>
                    <input type="text" id="bankName" name="bankName" class="form-input-field" required>
                </div>
                <div class="form-group">
                    <label for="ifscCode" class="form-label">IFSC Code</label>
                    <input type="text" id="ifscCode" name="ifscCode" class="form-input-field" required>
                </div>
                <div class="form-group">
                    <label for="upiId" class="form-label">UPI ID (Optional)</label>
                    <input type="text" id="upiId" name="upiId" class="form-input-field">
                </div>

                <div class="col-span-full mt-4">
                    <div class="flex items-center">
                        <input id="termsConsent" name="termsConsent" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" required>
                        <label for="termsConsent" class="ml-2 block text-sm text-gray-900">
                            I agree to the <a href="#" class="text-blue-600 hover:underline">Terms and Conditions</a>
                        </label>
                    </div>
                    <p id="formMessage" class="mt-2 hidden"></p>
                </div>

                <div class="col-span-full mt-6">
                    <button type="submit" id="submitInvestorFormBtn" class="form-submit-btn">
                        Submit Investment Details
                        <span id="formSubmitSpinner" class="ai-loading-spinner ml-3 hidden"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot, FieldValue, collection, addDoc, query } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const MAX_INVESTORS = 100; // Define your maximum limit here

        // Global Firebase variables (will be initialized after authentication)
        let app;
        let db;
        let auth;
        let currentUserId = null; // To store the authenticated user's ID
        let investorCountDocRef; // Reference to the Firestore document for investor count
        let selectedPlanDetails = {}; // To store details of the plan chosen by the user
        let currentInvestorCount = 0; // To store the last known investor count for animation

        // --- Number Counter Animation Function ---
        function animateNumber(element, start, end, duration) {
            let startTime = null;
            const range = end - start;
            const increment = end > start ? 1 : -1;

            const step = (currentTime) => {
                if (!startTime) startTime = currentTime;
                const progress = Math.min((currentTime - startTime) / duration, 1);
                const currentValue = Math.floor(start + progress * range);
                element.textContent = currentValue;

                if (progress < 1) {
                    requestAnimationFrame(step);
                } else {
                    element.textContent = end; // Ensure it ends on the exact number
                }
            };
            requestAnimationFrame(step);
        }

        // --- Firestore Investor Count Listener ---
        const setupInvestorCountListener = () => {
            if (!db || !investorCountDocRef) {
                console.error("Firestore DB or investorCountDocRef not ready for listener setup.");
                if (investorCountDisplay) investorCountDisplay.textContent = 'N/A';
                if (investNowBtn) investNowBtn.disabled = true;
                if (investLimitMessage) {
                    investLimitMessage.classList.remove('hidden');
                    investLimitMessage.textContent = "Database not connected. Please refresh.";
                }
                return;
            }

            onSnapshot(investorCountDocRef, async (docSnap) => {
                let newCount = 0;
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    newCount = data.count || 0;

                    // Cap count at MAX_INVESTORS if it somehow exceeds (e.g., manual backend edit)
                    if (newCount > MAX_INVESTORS) {
                        newCount = MAX_INVESTORS;
                        // Optionally, update Firestore to correct it if you want to strictly enforce it from frontend
                        // await setDoc(investorCountDocRef, { count: MAX_INVESTORS });
                    }
                } else {
                    // Document doesn't exist, initialize it to 0
                    console.log("Investor count document does not exist, creating it.");
                    await setDoc(investorCountDocRef, { count: 0 });
                }

                // Animate the number counter
                if (investorCountDisplay) {
                    animateNumber(investorCountDisplay, currentInvestorCount, newCount, 1000); // Animate over 1 second
                    currentInvestorCount = newCount; // Update last known count
                }

                if (investorLimitDisplay) investorLimitDisplay.textContent = MAX_INVESTORS; // Display max limit

                if (investNowBtn) {
                    if (newCount >= MAX_INVESTORS) {
                        investNowBtn.disabled = true;
                        if (investLimitMessage) {
                            investLimitMessage.classList.remove('hidden');
                            investLimitMessage.textContent = "The maximum investor limit has been reached!";
                        }
                        if (limitReachedMessage) {
                            limitReachedMessage.classList.remove('hidden'); // Also show on main page
                        }
                    } else {
                        // Only re-enable if it was disabled due to limit and now count is less
                        if (investNowBtn.disabled && investLimitMessage && investLimitMessage.textContent === "The maximum investor limit has been reached!") {
                            investNowBtn.disabled = false;
                        }
                        if (investLimitMessage) {
                            investLimitMessage.classList.add('hidden');
                        }
                        if (limitReachedMessage) {
                            limitReachedMessage.classList.add('hidden');
                        }
                    }
                }
            }, (error) => {
                console.error("Error listening to investor count:", error);
                if (investorCountDisplay) investorCountDisplay.textContent = 'Error';
                if (investNowBtn) investNowBtn.disabled = true;
                if (investLimitMessage) {
                    investLimitMessage.classList.remove('hidden');
                    investLimitMessage.textContent = "Error updating investor count in real-time. Please refresh.";
                }
            });
        };


        document.addEventListener('DOMContentLoaded', async () => {
            const investmentAmountInput = document.getElementById('investmentAmount');
            const investmentPlanSelect = document.getElementById('investmentPlan');
            const calculateBtn = document.getElementById('calculateBtn');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const resultsDiv = document.getElementById('results');
            const displayInitialInvestment = document.getElementById('displayInitialInvestment');
            const displayTotalReturn = document.getElementById('displayTotalReturn');
            const displayPercentageReturn = document.getElementById('displayPercentageReturn');
            const aiInsightDiv = document.getElementById('aiInsight');
            const errorMessageDiv = document.getElementById('errorMessage');
            const countdownElement = document.getElementById('countdown');
            const investorCountDisplay = document.getElementById('investorCountDisplay');
            const investorLimitDisplay = document.getElementById('investorLimitDisplay');
            const limitReachedMessage = document.getElementById('limitReachedMessage');

            const planDetailModal = document.getElementById('planDetailModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const investNowBtn = document.getElementById('investNowBtn');
            const investLimitMessage = document.getElementById('investLimitMessage'); // Message for modal
            const planCards = document.querySelectorAll('.plan-card');

            // Investor Form Modal elements
            const investorFormModal = document.getElementById('investorFormModal');
            const closeInvestorFormModalBtn = document.getElementById('closeInvestorFormModalBtn');
            const investorForm = document.getElementById('investorForm');
            const submitInvestorFormBtn = document.getElementById('submitInvestorFormBtn');
            const formSubmitSpinner = document.getElementById('formSubmitSpinner'); // Spinner for form submit button
            const formSelectedPlan = document.getElementById('formSelectedPlan');
            // Removed formInvestmentAmount display, it's now an input
            const formInvestmentAmountInput = document.getElementById('formInvestmentAmountInput'); // New input field
            const formMinInvestmentDisplay = document.getElementById('formMinInvestmentDisplay'); // New min investment display
            const formMessage = document.getElementById('formMessage'); // For displaying form errors/success

            const mobileMenuButton = document.getElementById('mobileMenuButton');
            const mobileMenu = document.getElementById('mobileMenu');
            const closeMobileMenuButton = document.getElementById('closeMobileMenuButton');
            const mobileMenuLinks = document.querySelectorAll('#mobileMenu a[data-close-menu]');

            const explorePlansBtn = document.getElementById('explorePlansBtn'); // Get the "Explore Our Plans" button


            // Toggle Mobile Menu
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    if (mobileMenu) {
                        mobileMenu.classList.remove('hidden');
                        setTimeout(() => mobileMenu.classList.add('opacity-100'), 10); // Fade in
                    }
                });
            }

            // Close Mobile Menu
            const closeMobileMenu = () => {
                if (mobileMenu) {
                    mobileMenu.classList.remove('opacity-100');
                    mobileMenu.classList.add('opacity-0');
                    mobileMenu.addEventListener('transitionend', () => {
                        mobileMenu.classList.add('hidden');
                    }, { once: true }); // Ensure hidden is applied after transition
                }
            };

            if (closeMobileMenuButton) {
                closeMobileMenuButton.addEventListener('click', closeMobileMenu);
            }

            // Close mobile menu when a link is clicked
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', closeMobileMenu);
            });


            const MONTHLY_RETURN_RATE = 0.075; // 7.5% monthly return

            // --- Firebase Initialization and Authentication ---
            try {
                // Get Canvas-provided Firebase config and app ID
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
                const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                // This flag ensures listeners are set up only once and only when auth is ready
                let isAuthReady = false;

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        currentUserId = user.uid;
                        console.log("Firebase Authenticated. User ID:", currentUserId);
                    } else {
                        // User is signed out or initial state. Attempt anonymous sign-in.
                        try {
                            await signInAnonymously(auth);
                            // After this, onAuthStateChanged will be called again with the new anonymous user.uid
                            return; // Exit this call to avoid duplicate listener setup
                        } catch (anonError) {
                            console.error("Error signing in anonymously:", anonError);
                            // If anonymous sign-in fails, default to a session-based random ID for basic functionality,
                            // but note that data won't persist across browser closures unless Firebase Auth fixes itself.
                            currentUserId = 'anonymous-' + crypto.randomUUID(); // Fallback for a session-based ID if Firebase Auth fails
                            if (investorCountDisplay) investorCountDisplay.textContent = 'Auth Error (Anon failed)';
                            if (investNowBtn) investNowBtn.disabled = true;
                            if (investLimitMessage) {
                                investLimitMessage.classList.remove('hidden');
                                investLimitMessage.textContent = "Authentication failed. Some features may be limited.";
                            }
                        }
                    }

                    // Only set up listeners once auth is definitively ready and currentUserId is assigned
                    if (currentUserId && !isAuthReady) {
                        isAuthReady = true; // Mark as ready
                        // Define Firestore document reference for the public investor count
                        investorCountDocRef = doc(db, `artifacts/${appId}/public/data/investor_limits`, 'currentCount');
                        setupInvestorCountListener(); // Start listening for count changes
                    }
                });

                // Attempt initial sign-in if a custom token is provided (e.g., by Canvas env)
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                }
                // The onAuthStateChanged listener will handle subsequent and anonymous sign-ins.

            } catch (error) {
                console.error("Error initializing Firebase or authenticating (outer catch):", error);
                if (investorCountDisplay) investorCountDisplay.textContent = 'Error';
                if (investNowBtn) investNowBtn.disabled = true;
                if (investLimitMessage) {
                    investLimitMessage.classList.remove('hidden');
                    investLimitMessage.textContent = "Error loading Firebase. Please refresh.";
                }
            }


            // --- Existing Website Logic (modified for investor limit) ---

            const sectionsToAnimate = document.querySelectorAll('section:not(#hero):not(#planDetailModal):not(#investorFormModal):not(#mobileMenu)');

            // Function to check if an element is in viewport
            const isInViewport = (element) => {
                const rect = element.getBoundingClientRect();
                return (
                    rect.top < (window.innerHeight || document.documentElement.clientHeight) * 0.8 &&
                    rect.bottom > 0
                );
            };

            // Function to reveal sections on scroll and initial load
            const revealSections = () => {
                sectionsToAnimate.forEach(section => {
                    if (isInViewport(section)) {
                        section.classList.remove('section-hidden');
                        section.classList.add('section-visible');
                    }
                });
            };

            // Initial setup: Add section-hidden class to all animatable sections
            sectionsToAnimate.forEach(section => {
                section.classList.add('section-hidden');
            });

            // Initial reveal on load to catch sections already in view
            revealSections();
            window.addEventListener('scroll', revealSections);


            // Countdown Timer Logic (1st day of next month)
            const updateCountdown = () => {
                const now = new Date();
                let nextMonth = now.getMonth() + 1;
                let year = now.getFullYear();
                if (nextMonth === 12) {
                    nextMonth = 0;
                    year++;
                }
                const offerEndDate = new Date(year, nextMonth, 1);

                const totalSeconds = (offerEndDate - now) / 1000;

                if (totalSeconds < 0) {
                    if (countdownElement) countdownElement.textContent = "Offer Expired!";
                    return;
                }

                const days = Math.floor(totalSeconds / (3600 * 24));
                const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = Math.floor(totalSeconds % 60);

                if (countdownElement) countdownElement.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            };

            setInterval(updateCountdown, 1000);
            updateCountdown();


            calculateBtn.addEventListener('click', async () => {
                const amount = parseFloat(investmentAmountInput.value);
                const plan = investmentPlanSelect.value;
                let totalReturn = 0;
                let lockInMonths = 0;
                let planName = "";
                let bonusPercentage = 0;

                if (isNaN(amount) || amount <= 0) {
                    if (aiInsightDiv) aiInsightDiv.textContent = 'Please enter a valid investment amount.';
                    if (resultsDiv) resultsDiv.classList.remove('hidden');
                    if (errorMessageDiv) errorMessageDiv.classList.add('hidden');
                    return;
                }

                if (plan === 'standard') {
                    lockInMonths = 2;
                    totalReturn = amount * (1 + (MONTHLY_RETURN_RATE * lockInMonths));
                    planName = "Standard Plan";
                } else if (plan === 'premium') {
                    lockInMonths = 6;
                    const now = new Date();
                    let nextMonth = now.getMonth() + 1;
                    let year = now.getFullYear();
                    if (nextMonth === 12) {
                        nextMonth = 0;
                        year++;
                    }
                    const offerEndDate = new Date(year, nextMonth, 1);

                    if (now < offerEndDate) {
                        bonusPercentage = 0.07;
                    } else {
                        bonusPercentage = 0.05;
                    }
                    totalReturn = amount * (1 + (MONTHLY_RETURN_RATE * lockInMonths) + bonusPercentage);
                    planName = "Premium 6-Month Plan";
                } else if (plan === 'elite') {
                    lockInMonths = 12;
                    bonusPercentage = 0.10;
                    totalReturn = amount * (1 + (MONTHLY_RETURN_RATE * lockInMonths) + bonusPercentage);
                    planName = "Elite 12-Month Plan";
                    if (amount < 1000) {
                         if (aiInsightDiv) aiInsightDiv.textContent = 'The Elite 12-Month Plan requires a minimum investment of ‚Çπ1000.';
                         if (resultsDiv) resultsDiv.classList.remove('hidden');
                         if (errorMessageDiv) errorMessageDiv.classList.add('hidden');
                         return;
                    }
                }

                const percentageReturn = ((totalReturn - amount) / amount) * 100;

                if (displayInitialInvestment) displayInitialInvestment.textContent = `‚Çπ${amount.toFixed(2)}`;
                if (displayTotalReturn) displayTotalReturn.textContent = `‚Çπ${totalReturn.toFixed(2)}`;
                if (displayPercentageReturn) displayPercentageReturn.textContent = `${percentageReturn.toFixed(2)}%`;
                if (resultsDiv) resultsDiv.classList.remove('hidden');
                if (errorMessageDiv) errorMessageDiv.classList.add('hidden');
                if (aiInsightDiv) aiInsightDiv.textContent = 'Generating AI insight...';

                if (loadingSpinner) loadingSpinner.classList.remove('hidden');

                const prompt = `Given an initial investment of ‚Çπ${amount.toFixed(2)} and selecting the ${planName} with a lock-in period of ${lockInMonths} months, the projected total return is ‚Çπ${totalReturn.toFixed(2)}, which is a total percentage return of ${percentageReturn.toFixed(2)}%. For the Elite 12-Month Plan, there is also a 2% referral bonus. Also, mention the current limited-time offer for the Premium 6-Month Plan which gives an additional 2% bonus, making it a total of 7% bonus for that plan if applicable. Provide a brief, encouraging, and clear insight about this investment, highlighting the benefits of ADS FUND and the chosen plan without giving direct financial advice. Focus on the value proposition and what this return signifies for the investor, keeping it within 100 words.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        if (aiInsightDiv) aiInsightDiv.textContent = text;
                    } else {
                        if (aiInsightDiv) aiInsightDiv.textContent = 'Failed to generate AI insight. Please try again.';
                        console.error('Gemini API response structure unexpected:', result);
                    }
                } catch (error) {
                    if (aiInsightDiv) aiInsightDiv.textContent = 'Error connecting to AI. Please check your network and try again.';
                    if (errorMessageDiv) errorMessageDiv.classList.remove('hidden');
                    console.error('Error calling Gemini API:', error);
                } finally {
                    if (loadingSpinner) loadingSpinner.classList.add('hidden');
                }
            });

            // Modal Functionality for Plan Details
            planCards.forEach(card => {
                card.addEventListener('click', () => {
                    // Check if Firebase is initialized and current investor count is available
                    if (investorCountDisplay && investorCountDisplay.textContent !== 'Loading...' && investorCountDisplay.textContent !== 'Error') {
                        const currentCount = parseInt(investorCountDisplay.textContent);
                        if (currentCount >= MAX_INVESTORS) {
                            if (investNowBtn) investNowBtn.disabled = true;
                            if (investLimitMessage) investLimitMessage.classList.remove('hidden');
                        } else {
                            if (investNowBtn) investNowBtn.disabled = false;
                            if (investLimitMessage) investLimitMessage.classList.add('hidden');
                        }
                    } else {
                        // If Firebase data isn't loaded yet, disable button and show loading message
                        if (investNowBtn) investNowBtn.disabled = true;
                        if (investLimitMessage) {
                            investLimitMessage.classList.remove('hidden');
                            investLimitMessage.textContent = "Checking investor limit...";
                        }
                    }

                    const planName = card.dataset.planName;
                    const monthlyReturn = card.dataset.monthlyReturn;
                    const minInvestment = parseFloat(card.dataset.minInvestment);
                    const payoutFrequency = card.dataset.payoutFrequency;
                    const lockIn = card.dataset.lockIn;
                    const benefitsRaw = card.dataset.benefits;
                    const totalReturn = card.dataset.totalReturn;

                    // Store selected plan details
                    selectedPlanDetails = {
                        planName: planName,
                        monthlyReturn: monthlyReturn,
                        minInvestment: minInvestment,
                        payoutFrequency: payoutFrequency,
                        lockIn: lockIn,
                        benefits: benefitsRaw,
                        totalReturn: totalReturn
                    };

                    if (document.getElementById('modalPlanName')) document.getElementById('modalPlanName').textContent = planName;
                    if (document.getElementById('modalMonthlyReturn')) document.getElementById('modalMonthlyReturn').textContent = monthlyReturn;
                    if (document.getElementById('modalMinInvestment')) document.getElementById('modalMinInvestment').textContent = minInvestment.toFixed(2);
                    if (document.getElementById('modalPayoutFrequency')) document.getElementById('modalPayoutFrequency').textContent = payoutFrequency;
                    if (document.getElementById('modalLockIn')) document.getElementById('modalLockIn').textContent = lockIn;
                    if (document.getElementById('modalTotalReturn')) document.getElementById('modalTotalReturn').textContent = totalReturn;

                    const benefitsList = document.getElementById('modalBenefits');
                    if (benefitsList) {
                        benefitsList.innerHTML = ''; // Clear previous benefits
                        try {
                            const benefits = JSON.parse(benefitsRaw);
                            // Separate benefits into 'SPECIAL OFFER' and 'Exclusive Perks' if they exist in the parsed benefits
                            const specialOffers = benefits.filter(benefit => benefit.includes("Bonus:") || benefit.includes("Total Return:"));
                            const exclusivePerks = benefits.filter(benefit => !benefit.includes("Bonus:") && !benefit.includes("Total Return:"));

                            if (specialOffers.length > 0) {
                                const h4Offer = document.createElement('h4');
                                h4Offer.className = 'text-xl font-semibold text-gray-700 mb-2 mt-4';
                                h4Offer.textContent = 'SPECIAL OFFER:';
                                benefitsList.appendChild(h4Offer);
                                specialOffers.forEach(benefit => {
                                    const li = document.createElement('li');
                                    li.textContent = benefit;
                                    benefitsList.appendChild(li);
                                });
                            }

                            if (exclusivePerks.length > 0) {
                                const h4Perks = document.createElement('h4');
                                h4Perks.className = 'text-xl font-semibold text-gray-700 mb-2 mt-4';
                                h4Perks.textContent = 'Exclusive Perks:';
                                benefitsList.appendChild(h4Perks);
                                exclusivePerks.forEach(benefit => {
                                    const li = document.createElement('li');
                                    li.textContent = benefit;
                                    benefitsList.appendChild(li);
                                });
                            }
                            // If neither specific category exists, just list general benefits as before
                            if (specialOffers.length === 0 && exclusivePerks.length === 0 && benefits.length > 0) {
                                const h4Benefits = document.createElement('h4');
                                h4Benefits.className = 'text-xl font-semibold text-gray-700 mb-2';
                                h4Benefits.textContent = 'Benefits:';
                                benefitsList.appendChild(h4Benefits);
                                benefits.forEach(benefit => {
                                    const li = document.createElement('li');
                                    li.textContent = benefit;
                                    benefitsList.appendChild(li);
                                });
                            }


                        } catch (e) {
                            console.error("Error parsing benefits:", e);
                            const li = document.createElement('li');
                            li.textContent = "Benefits information unavailable.";
                            benefitsList.appendChild(li);
                        }
                    }

                    if (planDetailModal) planDetailModal.classList.add('active');
                });
            });

            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', () => {
                    if (planDetailModal) planDetailModal.classList.remove('active');
                });
            }


            if (planDetailModal) {
                planDetailModal.addEventListener('click', (e) => {
                    if (e.target === planDetailModal) {
                        planDetailModal.classList.remove('active');
                    }
                });
            }


            // Event listener for the "Invest Now!" button in the Plan Detail Modal
            if (investNowBtn) {
                investNowBtn.addEventListener('click', () => {
                    if (planDetailModal) planDetailModal.classList.remove('active'); // Close plan detail modal

                    // Populate and open investor form modal
                    if (formSelectedPlan) formSelectedPlan.textContent = selectedPlanDetails.planName;
                    
                    // Set the minimum investment amount and display it
                    if (formInvestmentAmountInput) {
                        formInvestmentAmountInput.value = selectedPlanDetails.minInvestment;
                        formInvestmentAmountInput.min = selectedPlanDetails.minInvestment; // Set min attribute

                        // Set the step based on the plan type
                        if (selectedPlanDetails.planName === "Standard Plan") {
                            formInvestmentAmountInput.step = "100";
                        } else if (selectedPlanDetails.planName === "Premium 6-Month Plan" || selectedPlanDetails.planName === "Elite 12-Month Plan") {
                            formInvestmentAmountInput.step = "500";
                        } else {
                            formInvestmentAmountInput.step = "1"; // Default to 1 if plan name is unknown
                        }
                    }
                    if (formMinInvestmentDisplay) {
                        formMinInvestmentDisplay.textContent = selectedPlanDetails.minInvestment.toFixed(2);
                    }

                    if (investorForm) investorForm.reset(); // Clear previous form data
                    if (formMessage) formMessage.classList.add('hidden'); // Hide any previous messages

                    if (investorFormModal) investorFormModal.classList.add('active'); // Open investor form modal
                });
            }


            // Close Investor Form Modal
            if (closeInvestorFormModalBtn) {
                closeInvestorFormModalBtn.addEventListener('click', () => {
                    if (investorFormModal) investorFormModal.classList.remove('active');
                });
            }


            if (investorFormModal) {
                investorFormModal.addEventListener('click', (e) => {
                    if (e.target === investorFormModal) {
                        investorFormModal.classList.remove('active');
                    }
                });
            }


            // Handle Investor Form Submission
            if (investorForm) {
                investorForm.addEventListener('submit', async (e) => {
                    e.preventDefault(); // Prevent default form submission

                    if (formMessage) {
                        formMessage.classList.add('hidden'); // Hide previous messages instantly
                        formMessage.classList.remove('form-message-success', 'form-message-error', 'fade-out');
                    }

                    // Validate investment amount from the input field
                    const submittedInvestmentAmount = parseFloat(formInvestmentAmountInput.value);
                    if (isNaN(submittedInvestmentAmount) || submittedInvestmentAmount < selectedPlanDetails.minInvestment) {
                        if (formMessage) {
                            formMessage.classList.remove('hidden');
                            formMessage.classList.add('form-message-error');
                            formMessage.textContent = `Investment amount must be at least ‚Çπ${selectedPlanDetails.minInvestment.toFixed(2)} for ${selectedPlanDetails.planName}.`;
                        }
                        return; // Stop form submission
                    }

                    // Also validate that the amount is a multiple of the step size
                    let step = 1; // Default step
                    if (selectedPlanDetails.planName === "Standard Plan") {
                        step = 100;
                    } else if (selectedPlanDetails.planName === "Premium 6-Month Plan" || selectedPlanDetails.planName === "Elite 12-Month Plan") {
                        step = 500;
                    }

                    if (submittedInvestmentAmount % step !== 0) {
                        if (formMessage) {
                            formMessage.classList.remove('hidden');
                            formMessage.classList.add('form-message-error');
                            formMessage.textContent = `Investment amount must be a multiple of ‚Çπ${step} for ${selectedPlanDetails.planName}.`;
                        }
                        return;
                    }


                    // Show spinner and disable button
                    if (formSubmitSpinner) formSubmitSpinner.classList.remove('hidden');
                    if (submitInvestorFormBtn) submitInvestorFormBtn.disabled = true;

                    const formData = new FormData(investorForm);
                    const investorData = {};
                    for (let [key, value] of formData.entries()) {
                        investorData[key] = value;
                    }

                    // Add selected plan details and the submitted investment amount to investor data
                    investorData.selectedPlan = selectedPlanDetails.planName;
                    investorData.investmentAmount = submittedInvestmentAmount; // Use the value from the input field
                    investorData.timestamp = new Date().toISOString();

                    console.log("Investor Form Data:", investorData); // For demonstration, log data

                    if (!db || !investorCountDocRef || !currentUserId) {
                        if (formMessage) {
                            formMessage.classList.remove('hidden');
                            formMessage.classList.add('form-message-error');
                            formMessage.textContent = "Database not ready or user not authenticated. Cannot process investment.";
                        }
                        console.error("Firestore, investorCountDocRef, or currentUserId not initialized.");
                        // Hide spinner and re-enable button (if not explicitly disabled by limit)
                        if (formSubmitSpinner) formSubmitSpinner.classList.add('hidden');
                        if (currentInvestorCount < MAX_INVESTORS && submitInvestorFormBtn) submitInvestorFormBtn.disabled = false;
                        return;
                    }

                    try {
                        const docSnap = await getDoc(investorCountDocRef);
                        let currentCount = 0;
                        if (docSnap.exists()) {
                            currentCount = docSnap.data().count || 0;
                        }

                        if (currentCount < MAX_INVESTORS) {
                            // Atomically increment the count in Firestore
                            await updateDoc(investorCountDocRef, {
                                count: FieldValue.increment(1)
                            });

                            // --- Save investor details to Firestore (still happens, just not displayed) ---
                            // Note: The previous request was to remove the display, not the storage.
                            // If you wish to stop storing it, please clarify.
                            const userInvestmentsCollectionRef = collection(db, `artifacts/${appId}/users/${currentUserId}/investments`);
                            await addDoc(userInvestmentsCollectionRef, investorData);
                            // --- End save investor details ---

                            if (formMessage) {
                                formMessage.classList.remove('hidden');
                                formMessage.classList.add('form-message-success');
                                formMessage.textContent = "Investment registered successfully! Thank you for joining ADS FUND.";
                            }

                            if (investorForm) investorForm.reset(); // Clear the form
                            // Close modal after a short delay
                            setTimeout(() => {
                                if (investorFormModal) investorFormModal.classList.remove('active');
                                if (formSubmitSpinner) formSubmitSpinner.classList.add('hidden');
                                if (submitInvestorFormBtn) submitInvestorFormBtn.disabled = false;
                            }, 3000); // Keep message visible for 3 seconds
                            // Hide spinner and re-enable button immediately after successful update, before modal closes.
                            if (formSubmitSpinner) formSubmitSpinner.classList.add('hidden');
                            if (submitInvestorFormBtn) submitInvestorFormBtn.disabled = false;

                        } else {
                            if (formMessage) {
                                formMessage.classList.remove('hidden');
                                formMessage.classList.add('form-message-error');
                                formMessage.textContent = "Sorry, the maximum investor limit has been reached!";
                            }
                            if (submitInvestorFormBtn) submitInvestorFormBtn.disabled = true; // Keep disabled if limit is reached
                            if (formSubmitSpinner) formSubmitSpinner.classList.add('hidden'); // Hide spinner
                        }

                    } catch (error) {
                        console.error("Error processing investment:", error);
                        if (formMessage) {
                            formMessage.classList.remove('hidden');
                            formMessage.classList.add('form-message-error');
                            formMessage.textContent = "An error occurred during registration. Please try again.";
                        }
                        // Hide spinner and re-enable button (if not explicitly disabled by limit)
                        if (formSubmitSpinner) formSubmitSpinner.classList.add('hidden');
                        if (currentInvestorCount < MAX_INVESTORS && submitInvestorFormBtn) submitInvestorFormBtn.disabled = false;
                    }
                });
            }

            // New: Event listener for "Explore Our Plans" button
            if (explorePlansBtn) {
                explorePlansBtn.addEventListener('click', (event) => {
                    event.preventDefault(); // Prevent default anchor jump

                    const plansSection = document.getElementById('plans');
                    if (plansSection) {
                        plansSection.scrollIntoView({ behavior: 'smooth' });

                        // Add animation to each plan card after a short delay
                        setTimeout(() => {
                            planCards.forEach((card, index) => {
                                // Remove any existing animation class to allow re-triggering
                                card.classList.remove('animate-card-pop');
                                // Force reflow
                                void card.offsetWidth;
                                // Add the animation class with a staggered delay
                                setTimeout(() => {
                                    card.classList.add('animate-card-pop');
                                }, index * 100); // Stagger by 100ms
                            });
                        }, 800); // Start animation after 0.8 seconds (allowing scroll to finish)
                    }
                });
            }
        });
    </script>
</body>
</html>
